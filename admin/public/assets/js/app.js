!function(e){function t(o){if(a[o])return a[o].exports;var r=a[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}({2:function(e,t,a){e.exports=a("HLGl")},HLGl:function(e,t){webpackJsonp([1],{113:function(e,t){},35:function(e,t,a){"use strict";function o(e){g||a(38)}function r(e){x||a(39)}function i(e){P||a(36)}function n(e){re||a(113)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),s=a.n(l),c={name:"v-sideBar",components:{},props:["collapse"],computed:{},data:function(){return{defaultActive:""}},created:function(){},methods:{},mounted:function(){this.defaultActive=this.$route.path}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"sidebar",attrs:{theme:"dark",collapse:e.collapse,"default-active":e.defaultActive,router:!0}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._v(" "),a("el-submenu",{attrs:{index:"1"}},[a("template",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-picture"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("图片")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/image/loop"}},[e._v("首页轮播")]),e._v(" "),a("el-menu-item",{attrs:{index:"/image/banner"}},[e._v("banner图")])],2),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-star-on"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("番剧")])]),e._v(" "),a("el-menu-item-group",{attrs:{title:"番剧"}},[a("el-menu-item",{attrs:{index:"/bangumi/list"}},[e._v("番剧列表")])],1),e._v(" "),a("el-menu-item-group",{attrs:{title:"标签"}},[a("el-menu-item",{attrs:{index:"/bangumi/tag"}},[e._v("标签列表")])],1),e._v(" "),a("el-menu-item-group",{attrs:{title:"合集"}},[a("el-menu-item",{attrs:{index:"/bangumi/collection"}},[e._v("合集列表")])],1),e._v(" "),a("el-menu-item-group",{attrs:{title:"视频"}},[a("el-menu-item",{attrs:{index:"/bangumi/video"}},[e._v("视频列表")])],1)],2),e._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-setting"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("设置")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/admin/user"}},[e._v("管理员")])],2)],1)},u=[];m._withStripped=!0;var d={render:m,staticRenderFns:u},p=d,g=!1,h=a(3),f=o,v=h(c,p,f,"data-v-2ed21d08",null);v.options.__file="frontend/components/layouts/Sidebar.vue",v.esModule&&Object.keys(v.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),v.options.functional;var A=v.exports,b={name:"v-header",components:{},props:["collapse"],watch:{$route:function(e){this.breadcrumb=e.name}},computed:{},data:function(){return{breadcrumb:this.$route.name}},created:function(){},methods:{toggleCollapse:function(){this.$emit("update:collapse",!this.collapse)},logout:function(){this.$http.post("/auth/logout").then(function(){return window.location="/"})}},mounted:function(){}},w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-menu",{staticClass:"header",class:{"header-collapse":e.collapse},attrs:{mode:"horizontal"}},[o("el-menu-item",{attrs:{index:"0"}},[o("button",{staticClass:"collapse-btn",class:[e.collapse?"el-icon-d-arrow-right":"el-icon-d-arrow-left"],on:{click:e.toggleCollapse}})]),e._v(" "),o("span",{staticClass:"breadcrumb",domProps:{textContent:e._s(e.breadcrumb)}}),e._v(" "),o("el-submenu",{staticClass:"user-panel",attrs:{index:"9"}},[o("template",{attrs:{slot:"title"},slot:"title"},[o("img",{staticClass:"avatar",attrs:{src:a(40),alt:"avatar"}})]),e._v(" "),o("el-menu-item",{attrs:{index:"9-1"},on:{click:e.logout}},[e._v("退出")])],2)],1)},C=[];w._withStripped=!0;var F={render:w,staticRenderFns:C},_=F,x=!1,y=a(3),E=r,k=y(b,_,E,"data-v-0c1017c6",null);k.options.__file="frontend/components/layouts/Header.vue",k.esModule&&Object.keys(k.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),k.options.functional;var I=k.exports,M={name:"v-index",components:{vHeader:I,vSideBar:A},props:{},watch:{},computed:{},data:function(){return{isCollapse:!1}},methods:{},mounted:function(){}},S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"__orz"}},[a("v-header",{attrs:{collapse:e.isCollapse},on:{"update:collapse":function(t){e.isCollapse=t}}}),e._v(" "),a("v-side-bar",{attrs:{collapse:e.isCollapse}}),e._v(" "),a("router-view",{staticClass:"view",class:{"view-collapse":e.isCollapse}})],1)},Q=[];S._withStripped=!0;var B={render:S,staticRenderFns:Q},D=B,P=!1,Y=a(3),L=i,G=Y(M,D,L,null,null);G.options.__file="frontend/app.vue",G.esModule&&Object.keys(G.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),G.options.functional;var j=G.exports,z=a(19);s.a.use(z.default);var U=new z.default({mode:"hash",scrollBehavior:function(){return{y:0}},routes:[{path:"/",name:"首页",component:a(41).default},{path:"/image/loop",name:"首页轮播",component:a(43).default},{path:"/image/banner",name:"banner 图",component:a(45).default},{path:"/bangumi/list",name:"番剧列表",component:a(46).default},{path:"/bangumi/tag",name:"番剧标签",component:a(47).default},{path:"/bangumi/collection",name:"番剧合集",component:a(48).default},{path:"/bangumi/video",name:"番剧视频",component:a(49).default},{path:"/admin/user",name:"管理员",component:a(50).default}]}),K=a(20);s.a.use(K.default);var O=new K.default.Store({state:{login:null},mutations:{SET_LOGIN:function(e,t){var a=t.bool;e.login=a}},actions:{setLogin:function(e,t){(0,e.commit)("SET_LOGIN",{bool:t.bool})}},getters:{isLogin:function(e){return e.login}}}),N=a(51),H=a.n(N),J=H.a.create({headers:{Accept:"application/json","X-CSRF-TOKEN":document.getElementById("_csrf")&&document.getElementById("_csrf").getAttribute("content")},timeout:1e4});J.interceptors.request.use(function(e){return document.getElementById("__orz")?e:null}),J.interceptors.response.use(function(e){return e&&e.data},function(e){return e.response&&401===e.response.status?(alert("登录超时，请重新登录"),void(window.location="/")):e.response?Promise.reject(e.response.data):Promise.reject(e)});var q=J,$=a(70),R=a.n($),T={};T.install=function(e,t){e.prototype.$http=q,e.prototype.$deepAssign=R.a,e.prototype.$resize=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(""===t)return"";var o=function(){if(e.prototype.$isServer)return!1;if(void 0!==window.supportWebP)return window.supportWebP;var t=document.createElement("canvas");if(t.getContext&&t.getContext("2d")){var a=0===t.toDataURL("image/webp").indexOf("data:image/webp");return window.supportWebP=a,a}return!1}()?"/format/webp":"";if(a.width&&a.width>0){var r="/w/"+a.width,i=void 0===a.mode?1:a.mode;return t+"?imageMogr2/auto-orient/strip|imageView2/"+i+r+(a.height?"/h/"+a.height:1===i?"/h/"+a.width:"")+o}return t+"?imageMogr2/auto-orient/strip"+o}};var W=T,Z=a(72),V=a.n(Z),X={name:"v-modal",props:{value:{type:Boolean,default:!1},close:{type:Boolean,default:!0},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},submitText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},headerText:{type:String,default:"标题"}},watch:{toggle:function(e){this.$emit("input",e)},value:function(e){this.toggle=e}},data:function(){return{toggle:this.value}},methods:{handleClose:function(){this.toggle=!1},handleSubmit:function(){this.$emit("submit")},handleCancel:function(){this.$emit("cancel"),this.handleClose()}}},ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[e.toggle?a("section",{staticClass:"v-modal-wrap"},[a("div",{staticClass:"v-modal-mask",on:{click:e.handleClose}}),e._v(" "),a("div",{staticClass:"v-modal",on:{click:function(e){}}},[e.header?a("header",[e._t("header",[a("h4",{domProps:{textContent:e._s(e.headerText)}}),e._v(" "),e.close?a("a",{staticClass:"close",on:{click:e.handleClose}},[e._v("×")]):e._e()])],2):e._e(),e._v(" "),a("main",[e._t("default")],2),e._v(" "),e.footer?a("footer",[e._t("footer",[a("button",{staticClass:"submit",domProps:{textContent:e._s(e.submitText)},on:{click:e.handleSubmit}}),e._v(" "),a("button",{staticClass:"cancel",domProps:{textContent:e._s(e.cancelText)},on:{click:e.handleCancel}})])],2):e._e()])]):e._e()])},te=[];ee._withStripped=!0;var ae={render:ee,staticRenderFns:te},oe=ae,re=!1,ie=a(3),ne=n,le=ie(X,oe,ne,null,null);le.options.__file="frontend/components/modal.vue",le.esModule&&Object.keys(le.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),le.options.functional;var se=le.exports,ce=a(114),me=function(){function e(e,t){var a=[],o=!0,r=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(o=(n=l.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue={errorBagName:"errors",fieldsBagName:"vee-fields",delay:0,locale:"en",dictionary:null,strict:!0,classes:!0,classNames:{touched:"focus",untouched:"blur",valid:"valid",invalid:"invalid",pristine:"pristine",dirty:"dirty"},events:"input|blur",inject:!0,validity:!0,aria:!1};s.a.use(ce.a,ue),ce.a.Validator.extend("nickname",function(e,t){var a=me(t,1),o=a[0],r=e.replace(/([\u4e00-\u9fa5])/g,"aa").trim().length,i=o.split("-");return r>=i[0]&&r<=i[1]}),ce.a.Validator.extend("len",function(e,t){return e.trim().length===parseInt(t[0],10)});a(115);a.d(t,"app",function(){return de}),s.a.use(V.a),s.a.use(W),s.a.component(se.name,se);var de=new s.a({router:U,store:O,render:function(e){return e(j)}}).$mount("#app")},36:function(e,t){},38:function(e,t){},39:function(e,t){},40:function(e,t){e.exports="data:image/gif;base64,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"},41:function(e,t,a){"use strict";function o(e){c||a(42)}Object.defineProperty(t,"__esModule",{value:!0});var r={name:"v-page-index",components:{},props:{},watch:{},computed:{},data:function(){return{}},created:function(){},methods:{},mounted:function(){}},i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("index page")])])}];i._withStripped=!0;var l={render:i,staticRenderFns:n},s=l,c=!1,m=a(3),u=o,d=m(r,s,u,"data-v-46e31642",null);d.options.__file="frontend/views/index.vue",d.esModule&&Object.keys(d.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),d.options.functional;t.default=d.exports},42:function(e,t){},43:function(e){function t(t,a,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,a){"use strict";function o(e){m||a(44)}Object.defineProperty(t,"__esModule",{value:!0});var r={url:"",userId:"",bangumiId:""},i={name:"v-page-image-loop",computed:{filter:function(){var e=(this.pagination.curPage-1)*this.pagination.pageSize;return _.orderBy(this.list,"created_at","desc").slice(e,e+this.pagination.pageSize)}},data:function(){return{list:[],pagination:{totalPage:0,pageSize:12,curPage:1},showCreateModal:!1,createForm:r,uploadHeaders:{token:"",key:""}}},created:function(){this.getLoops(),this.getUptoken()},methods:{getLoops:function(){var e=this;this.$http.get("/image/loop/list").then(function(t){e.pagination.totalPage=t.length,e.list=t.map(function(e){return e.use=!e.deleted_at,e})})},getUptoken:function(){var e=this;this.$http.get("/image/uptoken").then(function(t){e.uploadHeaders.token=t})},handleSizeChange:function(e){this.pagination.pageSize=e},handleCurrentChange:function(e){this.pagination.curPage=e},handleSwitch:function(e,t){var a=this;this.$confirm("确认要执行该操作吗?","提示").then(function(){a.$http.post("/image/loop/toggle",{id:e.id,isDelete:!e.deleted_at}).then(function(){a.$message.success("操作成功")}).catch(function(){a.$message.error("操作失败"),a.list[t+(a.pagination.curPage-1)*a.pagination.pageSize].use=!e.deleted_at})}).catch(function(){a.list[t+(a.pagination.curPage-1)*a.pagination.pageSize].use=!e.deleted_at})},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),this.uploadHeaders.key="loop/"+(new Date).getTime()+"/"+Math.random().toString(36).substring(3,6),t&&a},handleCreateLoopSuccess:function(e,t){this.createForm.url=e.key},saveLoop:function(){var e=this;this.$validator.validateAll("create-loop").then(function(t){t?e.$http.post("/image/loop/create",{url:e.createForm.url,bangumi_id:e.createForm.bangumi_id,user_id:e.createForm.user_id}).then(function(t){e.list.unshift({id:t,url:e.createForm.url,bangumi_id:e.createForm.bangumi_id,user_id:e.createForm.user_id,use:!0}),e.createForm=r,e.$message.success("操作成功")}).catch(function(){e.$message.error("操作失败")}):e.$message.warning("请先上传图片")})}}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-button",{attrs:{type:"primary",icon:"plus",size:"large"},on:{click:function(t){e.showCreateModal=!0}}},[e._v("添加图片")])],1),e._v(" "),a("div",{staticClass:"main-view"},e._l(e.filter,function(t,o){return a("div",{staticClass:"loop"},[a("img",{attrs:{src:e.$resize(t.url,{width:280,height:173}),alt:"loop"}}),e._v(" "),a("div",{staticClass:"control"},[a("el-switch",{attrs:{"on-text":"","off-text":""},on:{change:function(a){e.handleSwitch(t,o)}},model:{value:t.use,callback:function(e){t.use=e},expression:"item.use"}})],1)])})),e._v(" "),a("v-modal",{attrs:{"header-text":"首页轮播图上传"},on:{submit:e.saveLoop},model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[a("el-form",{attrs:{model:e.createForm}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"番剧id","label-width":"60px"}},[a("el-input",{attrs:{name:"bangumi_id","auto-complete":"off"},model:{value:e.createForm.bangumiId,callback:function(t){e.createForm.bangumiId="string"==typeof t?t.trim():t},expression:"createForm.bangumiId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{attrs:{label:"用户id","label-width":"60px"}},[a("el-input",{attrs:{name:"user_id","auto-complete":"off"},model:{value:e.createForm.userId,callback:function(t){e.createForm.userId="string"==typeof t?t.trim():t},expression:"createForm.userId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"资源","label-width":"60px"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:"required",scope:"create-loop"},expression:"{\n                      rules: 'required',\n                      scope: 'create-loop'\n                    }"}],attrs:{name:"url","auto-complete":"off"},model:{value:e.createForm.url,callback:function(t){e.createForm.url="string"==typeof t?t.trim():t},expression:"createForm.url"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("el-form-item",[a("el-upload",{attrs:{action:"http://up.qiniu.com",data:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleCreateLoopSuccess,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],1),e._v(" "),a("footer",[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.pagination.curPage,"page-sizes":[12,24,48],"page-size":e.pagination.pageSize,pageCount:e.pagination.totalPage,total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[];n._withStripped=!0;var s={render:n,staticRenderFns:l},c=s,m=!1,u=a(3),d=o,p=u(i,c,d,"data-v-27456ed0",null);p.options.__file="frontend/views/image/loop.vue",p.esModule&&Object.keys(p.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),p.options.functional;t.default=p.exports}),44:function(e,t){},45:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"v-",components:{},props:{},watch:{},computed:{},data:function(){return{}},created:function(){},methods:{},mounted:function(){}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-col",{attrs:{span:8}},[a("el-alert",{attrs:{title:"展示规则：",type:"info",description:"如果所在时刻没有图或有多张图，则显示最后一张图.",closable:!1}})],1)],1),e._v(" "),a("div",{staticClass:"main-view"}),e._v(" "),a("footer")])},i=[];r._withStripped=!0;var n={render:r,staticRenderFns:i},l=n,s=a(3),c=s(o,l,null,null,null);c.options.__file="frontend/views/image/banner.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),c.options.functional;t.default=c.exports},46:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"",alias:"",released_at:"",released_video_id:"",tags:[],avatar:"",banner:"",season:"",summary:"",collection_id:"",update:!1},r={name:"",avatar:"",banner:"",alias:"",summary:""},i='{"name": ["xx", "xx"], "part": [0, "xx", -1], "time": ["xxxx.xx", "xxxx.xx"]}',n={name:"v-page-bangumi-list",computed:{filter:function(){var e=(this.pagination.curPage-1)*this.pagination.pageSize;return this.list.slice(e,e+this.pagination.pageSize)}},data:function(){return{list:[],tags:[],collections:[],pagination:{totalPage:0,pageSize:20,curPage:1},showEditorModal:!1,showCreateModal:!1,dialogTitle:"",release_weekly:[{id:0,name:"不连载"},{id:1,name:"周一"},{id:2,name:"周二"},{id:3,name:"周三"},{id:4,name:"周四"},{id:5,name:"周五"},{id:6,name:"周六"},{id:7,name:"周日"}],editIndex:0,editForm:o,createForm:r,uploadHeaders:{token:"",key:""},CDNPrefixp:"https://cdn.riuir.com/",loading:!0}},created:function(){this.getBangumis(),this.getUptoken()},methods:{getBangumis:function(){var e=this;this.$http.get("/bangumi/list").then(function(t){e.list=t.bangumis,e.tags=t.tags,e.collections=t.collections,e.pagination.totalPage=Math.ceil(e.list.length/e.pagination.pageSize),e.loading=!1})},getUptoken:function(){var e=this;this.$http.get("/image/uptoken").then(function(t){e.uploadHeaders.token=t})},handleSizeChange:function(e){this.pagination.pageSize=e},handleCurrentChange:function(e){this.pagination.curPage=e},handleEditOpen:function(e,t){var a=this;this.dialogTitle=t.name,this.editIndex=e+(this.pagination.curPage-1)*this.pagination.pageSize;var o=[],r=!0,n=!1,l=void 0;try{for(var s,c=t.tags[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var m=s.value;o.push(m.name)}}catch(e){n=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(n)throw l}}Object.keys(t).forEach(function(e){a.editForm[e]=t[e]}),this.editForm.tags=o,this.editForm.season=t.season||i,this.editForm.released_video_id=t.released_video_id||0,this.editForm.collection_id=t.collection_id||0,this.editForm.update=!1,this.showEditorModal=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),this.uploadHeaders.key="bangumi/avatar-banner/"+(new Date).getTime()+"/"+Math.random().toString(36).substring(3,6),t&&a},getTagIdByName:function(e){var t=!0,a=!1,o=void 0;try{for(var r,i=this.tags[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var n=r.value;if(n.name===e)return n.id}}catch(e){a=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}},handleEditDone:function(){var e=this,t=[],a=!0,o=!1,r=void 0;try{for(var n,l=this.editForm.tags[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){var s=n.value;t.push(s.id?s.id:this.getTagIdByName(s))}}catch(e){o=!0,r=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw r}}var c=this.editForm.season===i?"":this.editForm.season;if(c)try{var m=JSON.parse(c),u=m.name,d=m.part,p=m.time;if(p.every(function(e){return/^\d{4}\.\d{1,2}$/.test(e)})&&d.some(function(e){return"number"!=typeof e}))delete m.name,delete m.part,c=JSON.stringify(m);else{if(!u||!d||!p)return void this.$message.error("season 缺少 key");if(u.length!==d.length-1||d.length<2)return void this.$message.error("season 信息不完整");if(d.some(function(e){return"number"!=typeof e}))return void this.$message.error("season 的 part 必须是数字");if(!d.every(function(e,t,a){return t?t===a.length-1?-1===e||e>a[t-1]:e>a[t-1]:0===e}))return void this.$message.error("season part 要从 0 开始，升序排列，最后一项可为 -1");if(p.every(function(e){return"xxxx.xx"===e}))delete m.time,c=JSON.stringify(m);else{if(p.every(function(e){return!/^\d{4}\.\d{1,2}$/.test(e)}))return void this.$message.error("time 格式不正确");if(u.length!==p.length)return void this.$message.error("time 数量不对")}}}catch(e){return void this.$message.error("season 不是 JSON 格式")}this.editForm.alias=this.editForm.alias?this.editForm.alias.split(/,|，/).join(","):"",this.$http.post("/bangumi/edit",Object.assign(this.editForm,{tags:t,season:c})).then(function(){var a=[],o=!0,r=!1,i=void 0;try{for(var n,l=e.tags[Symbol.iterator]();!(o=(n=l.next()).done);o=!0){var s=n.value,m=!0,u=!1,d=void 0;try{for(var p,g=t[Symbol.iterator]();!(m=(p=g.next()).done);m=!0){p.value===s.id&&a.push(s)}}catch(e){u=!0,d=e}finally{try{!m&&g.return&&g.return()}finally{if(u)throw d}}}}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}Object.keys(e.editForm).forEach(function(t){e.list[e.editIndex][t]=e.editForm[t]}),e.list[e.editIndex].tags=a,e.list[e.editIndex].season=c,e.showEditorModal=!1,e.$message.success("操作成功")},function(t){e.$message.error("操作失败")})},handleDelete:function(e,t){var a=this,o=null!==t.deleted_at;this.$confirm("确定要"+(o?"恢复":"删除")+"《"+t.name+"》吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/bangumi/delete",{id:t.id,isDeleted:o}).then(function(){a.list[e+(a.pagination.curPage-1)*a.pagination.pageSize].deleted_at=o?null:moment().format("YYYY-MM-DD H:m:s"),a.$message.success("操作成功")},function(e){a.$message.error("操作失败")})})},handleEditAvatarSuccess:function(e,t){this.editForm.avatar=e.key},handleEditBannerSuccess:function(e,t){this.editForm.banner=e.key},handleCreateAvatarSuccess:function(e,t){this.createForm.avatar=e.key},handleCreateBannerSuccess:function(e,t){this.createForm.banner=e.key},handleCreateDone:function(){var e=this;this.$validator.validateAll("create-bangumi").then(function(t){t?e.$http.post("/bangumi/create",{name:e.createForm.name,avatar:e.createForm.avatar.replace(e.CDNPrefixp,""),banner:e.createForm.banner.replace(e.CDNPrefixp,""),alias:e.createForm.alias.split(/,|，/).join(","),summary:e.createForm.summary}).then(function(t){e.list.push(Object.assign(o,{id:t,name:e.createForm.name,avatar:e.createForm.avatar,banner:e.createForm.banner,summary:e.createForm.summary,alias:e.createForm.alias.split(/,|，/).join(","),deleted_at:moment().format("YYYY-MM-DD H:m:s")})),e.showCreateModal=!1,e.$message.success("操作成功"),e.createForm=r},function(t){e.$message.error("操作失败")}):e.$message.warning("信息不完整")})}}},l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-button",{attrs:{type:"primary",icon:"plus",size:"large"},on:{click:function(t){e.showCreateModal=!0}}},[e._v("创建番剧")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-view",attrs:{data:e.filter,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{"label-position":"left",inline:""}},[a("div",[a("el-form-item",{attrs:{label:"别名"}},[a("span",{domProps:{textContent:e._s(t.row.alias)}})])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"横幅"}},[a("span",{domProps:{textContent:e._s("https://cdn.riuir.com/"+t.row.banner)}})]),e._v(" "),a("el-form-item",{attrs:{label:"头像"}},[a("span",{domProps:{textContent:e._s("https://cdn.riuir.com/"+t.row.avatar)}})])],1),e._v(" "),t.row.tags.length?a("div",[a("el-form-item",{attrs:{label:"标签"}},e._l(t.row.tags,function(t){return a("el-tag",{key:t.id,staticStyle:{"margin-right":"10px"},attrs:{type:"gray"},domProps:{textContent:e._s(t.name)}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"简介"}},[a("span",{domProps:{innerHTML:e._s(t.row.summary)}})]),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"关注人数"}},[a("span",[e._v(e._s(t.row.like?t.row.like:0))])]),e._v(" "),a("el-form-item",{attrs:{label:"总评分数"}},[a("span",[e._v(e._s(t.row.score?t.row.score:0))])])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"创建时间"}},[a("span",{domProps:{textContent:e._s(t.row.created_at)}})]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",{domProps:{textContent:e._s(t.row.updated_at)}})]),e._v(" "),t.row.deleted_at?a("el-form-item",{attrs:{label:"删除时间"}},[a("span",{domProps:{textContent:e._s(t.row.deleted_at)}})]):e._e()],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",sortable:"",label:"索引"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"番名"}}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"edit"},on:{click:function(a){e.handleEditOpen(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"delete",type:t.row.deleted_at?"warning":"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v(e._s(t.row.deleted_at?"恢复":"删除"))])]}}])})],1),e._v(" "),a("v-modal",{staticClass:"bangumi-editor-modal",attrs:{"header-text":"编辑番剧"},on:{submit:e.handleEditDone},model:{value:e.showEditorModal,callback:function(t){e.showEditorModal=t},expression:"showEditorModal"}},[a("el-form",{attrs:{model:e.editForm}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"番名","label-width":"60px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.editForm.name="string"==typeof t?t.trim():t},expression:"editForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"别名","label-width":"60px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.alias,callback:function(t){e.editForm.alias="string"==typeof t?t.trim():t},expression:"editForm.alias"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"连载","label-width":"60px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.editForm.released_at,callback:function(t){e.editForm.released_at=t},expression:"editForm.released_at"}},e._l(e.release_weekly,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"视频","label-width":"60px"}},[a("el-input",{attrs:{placeholder:"最新视频id","auto-complete":"off"},model:{value:e.editForm.released_video_id,callback:function(t){e.editForm.released_video_id="string"==typeof t?t.trim():t},expression:"editForm.released_video_id"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"更新连载","label-width":"100px"}},[a("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.editForm.update,callback:function(t){e.editForm.update=t},expression:"editForm.update"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"标签","label-width":"60px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.editForm.tags,callback:function(t){e.editForm.tags=t},expression:"editForm.tags"}},e._l(e.tags,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合集","label-width":"60px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.editForm.collection_id,callback:function(t){e.editForm.collection_id=t},expression:"editForm.collection_id"}},e._l(e.collections,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"头像","label-width":"60px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.avatar,callback:function(t){e.editForm.avatar="string"==typeof t?t.trim():t},expression:"editForm.avatar"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("el-form-item",[a("el-upload",{attrs:{action:"http://up.qiniu.com",data:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleEditAvatarSuccess,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"横幅","label-width":"60px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.banner,callback:function(t){e.editForm.banner="string"==typeof t?t.trim():t},expression:"editForm.banner"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("el-form-item",[a("el-upload",{attrs:{action:"http://up.qiniu.com",data:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleEditBannerSuccess,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"季度","label-width":"60px"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入番剧季度信息，JSON格式，包含 part，time，name 字段"},model:{value:e.editForm.season,callback:function(t){e.editForm.season="string"==typeof t?t.trim():t},expression:"editForm.season"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介","label-width":"60px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入番剧简介"},model:{value:e.editForm.summary,callback:function(t){e.editForm.summary="string"==typeof t?t.trim():t},expression:"editForm.summary"}})],1)],1)],1),e._v(" "),a("v-modal",{staticClass:"bangumi-create-modal",attrs:{"header-text":"创建番剧"},on:{submit:e.handleCreateDone},model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[a("el-form",{attrs:{model:e.createForm}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"番名","label-width":"60px"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:"required",scope:"create-bangumi"},expression:"{\n                        rules: 'required',\n                        scope: 'create-bangumi'\n                      }"}],attrs:{placeholder:"番剧的名称","auto-complete":"off"},model:{value:e.createForm.name,callback:function(t){e.createForm.name="string"==typeof t?t.trim():t},expression:"createForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"别名","label-width":"60px"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:"required",scope:"create-bangumi"},expression:"{\n                        rules: 'required',\n                        scope: 'create-bangumi'\n                      }"}],attrs:{placeholder:"番剧的别名，以逗号分隔","auto-complete":"off"},model:{value:e.createForm.alias,callback:function(t){e.createForm.alias="string"==typeof t?t.trim():t},expression:"createForm.alias"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"头像","label-width":"60px"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:"required",scope:"create-bangumi"},expression:"{\n                        rules: 'required',\n                        scope: 'create-bangumi'\n                      }"}],attrs:{placeholder:"头像，2M 以内的jpg, png","auto-complete":"off"},model:{value:e.createForm.avatar,callback:function(t){e.createForm.avatar="string"==typeof t?t.trim():t},expression:"createForm.avatar"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("el-form-item",[a("el-upload",{attrs:{action:"http://up.qiniu.com",data:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleCreateAvatarSuccess,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"横幅","label-width":"60px"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:"required",scope:"create-bangumi"},expression:"{\n                        rules: 'required',\n                        scope: 'create-bangumi'\n                      }"}],attrs:{placeholder:"横幅，2M 以内的jpg, png","auto-complete":"off"},model:{value:e.createForm.banner,callback:function(t){e.createForm.banner="string"==typeof t?t.trim():t},expression:"createForm.banner"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("el-form-item",[a("el-upload",{attrs:{action:"http://up.qiniu.com",data:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleCreateBannerSuccess,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"简介","label-width":"60px"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:{rules:"required",scope:"create-bangumi"},expression:"{\n            rules: 'required',\n            scope: 'create-bangumi'\n          }"}],attrs:{type:"textarea",rows:5,placeholder:"请输入番剧简介，尽量在200字以内"},model:{value:e.createForm.summary,callback:function(t){e.createForm.summary="string"==typeof t?t.trim():t},expression:"createForm.summary"}})],1)],1)],1),e._v(" "),a("footer",[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.pagination.curPage,"page-sizes":[20,50,100],"page-size":e.pagination.pageSize,pageCount:e.pagination.totalPage,total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[];l._withStripped=!0;var c={render:l,staticRenderFns:s},m=c,u=a(3),d=u(n,m,null,null,null);d.options.__file="frontend/views/bangumi/list.vue",d.esModule&&Object.keys(d.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),d.options.functional;t.default=d.exports},47:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"v-page-bangumi-tag",computed:{filter:function(){var e=(this.pagination.curPage-1)*this.pagination.pageSize;return this.list.slice(e,e+this.pagination.pageSize)}},data:function(){return{list:[],pagination:{totalPage:0,pageSize:20,curPage:1},models:[{id:"0",name:"番剧"}],showEditorModal:!1,showCreateModal:!1,editForm:{index:"",name:"",id:"",model:""},createForm:{name:"",model:""},loading:!0}},created:function(){this.getTags()},methods:{getTags:function(){var e=this;this.$http.get("/bangumi/tags").then(function(t){e.list=t,e.pagination.totalPage=Math.ceil(e.list.length/e.pagination.pageSize),e.loading=!1})},handleSizeChange:function(e){this.pagination.pageSize=e},handleCurrentChange:function(e){this.pagination.curPage=e},modelFormat:function(e){var t=!0,a=!1,o=void 0;try{for(var r,i=this.models[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var n=r.value;if(n.name===e)return n.id;if(n.id===e)return n.name}}catch(e){a=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}},handleEditOpen:function(e,t){this.editForm={index:e,id:t.id,name:t.name,model:t.model},this.showEditorModal=!0},handleEditDone:function(){var e=this;this.$http.post("/tag/edit",{id:this.editForm.id,name:this.editForm.name,model:this.editForm.model}).then(function(){var t=e.editForm.index+(e.pagination.curPage-1)*e.pagination.pageSize;e.list[t]=e.editForm,e.showEditorModal=!1,e.$message.success("操作成功")},function(t){e.$message.error("操作失败")})},handleCreateDone:function(){var e=this,t=!0,a=!1,o=void 0;try{for(var r,i=this.list[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){if(r.value.name===this.createForm.name)return void this.$message({message:"标签已存在",type:"warning"})}}catch(e){a=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}this.$http.post("/tag/create",{name:this.createForm.name,model:this.modelFormat(this.createForm.model)}).then(function(t){e.list.push({id:t,name:e.createForm.name,model:e.modelFormat(e.createForm.model)}),e.showCreateModal=!1,e.$message.success("操作成功"),e.createForm={name:"",model:""}},function(t){e.$message.error("操作失败")})}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-button",{attrs:{type:"primary",icon:"plus",size:"large"},on:{click:function(t){e.showCreateModal=!0}}},[e._v("创建标签")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-view",attrs:{data:e.filter,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"id",sortable:"",label:"索引"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.modelFormat(t.row.model))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(a){e.handleEditOpen(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("v-modal",{staticClass:"tag-editor-modal",attrs:{"header-text":"标签编辑"},on:{submit:e.handleEditDone},model:{value:e.showEditorModal,callback:function(t){e.showEditorModal=t},expression:"showEditorModal"}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{attrs:{label:"名称","label-width":"60px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.editForm.name="string"==typeof t?t.trim():t},expression:"editForm.name"}})],1)],1)],1),e._v(" "),a("v-modal",{staticClass:"tag-creator-modal",attrs:{"header-text":"创建标签"},on:{submit:e.handleCreateDone},model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[a("el-form",{attrs:{model:e.createForm}},[a("el-form-item",{attrs:{label:"类型","label-width":"60px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createForm.model,callback:function(t){e.createForm.model=t},expression:"createForm.model"}},e._l(e.models,function(e){return a("el-option",{key:e.id,attrs:{value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"名称","label-width":"60px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.name,callback:function(t){e.createForm.name="string"==typeof t?t.trim():t},expression:"createForm.name"}})],1)],1)],1),e._v(" "),a("footer",[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.pagination.curPage,"page-sizes":[20,50,100],"page-size":e.pagination.pageSize,pageCount:e.pagination.totalPage,total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[];r._withStripped=!0;var n={render:r,staticRenderFns:i},l=n,s=a(3),c=s(o,l,null,null,null);c.options.__file="frontend/views/bangumi/tag.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),c.options.functional;t.default=c.exports},48:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"v-page-collection",computed:{filter:function(){var e=(this.pagination.curPage-1)*this.pagination.pageSize;return this.list.slice(e,e+this.pagination.pageSize)}},data:function(){return{list:[],pagination:{totalPage:0,pageSize:20,curPage:1},showEditorModal:!1,showCreateModal:!1,editForm:{index:"",name:"",id:"",title:""},createForm:{name:"",title:""},loading:!0}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("/bangumi/collection/list").then(function(t){e.list=t,e.pagination.totalPage=Math.ceil(e.list.length/e.pagination.pageSize),e.loading=!1})},handleSizeChange:function(e){this.pagination.pageSize=e},handleCurrentChange:function(e){this.pagination.curPage=e},handleEditOpen:function(e,t){this.editForm={index:e,id:t.id,name:t.name,title:t.title},this.showEditorModal=!0},handleEditDone:function(){var e=this;if(!this.editForm.title||!this.editForm.name)return void this.$message({message:"不能有空值",type:"warning"});this.$http.post("/bangumi/collection/edit",{id:this.editForm.id,name:this.editForm.name,title:this.editForm.title}).then(function(){var t=e.editForm.index+(e.pagination.curPage-1)*e.pagination.pageSize;e.list[t]=e.editForm,e.showEditorModal=!1,e.$message.success("操作成功")},function(t){e.$message.error("操作失败")})},handleCreateDone:function(){var e=this;if(!this.createForm.title||!this.createForm.name)return void this.$message({message:"不能有空值",type:"warning"});var t=!0,a=!1,o=void 0;try{for(var r,i=this.list[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var n=r.value;if(n.name===this.createForm.name||n.name===this.createForm.title||n.title===this.createForm.title||n.title===this.createForm.name)return void this.$message({message:"合集已存在",type:"warning"})}}catch(e){a=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}this.$http.post("/bangumi/collection/create",{name:this.createForm.name,title:this.createForm.title}).then(function(t){e.list.push({id:t,name:e.createForm.name,title:e.createForm.title}),e.showCreateModal=!1,e.$message.success("操作成功"),e.createForm={name:"",title:""}},function(t){e.$message.error("操作失败")})}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-button",{attrs:{type:"primary",icon:"plus",size:"large"},on:{click:function(t){e.showCreateModal=!0}}},[e._v("创建合集")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-view",attrs:{data:e.filter,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"id",sortable:"",label:"索引"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(a){e.handleEditOpen(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("v-modal",{staticClass:"tag-editor-modal",attrs:{"header-text":"标签编辑"},on:{submit:e.handleEditDone},model:{value:e.showEditorModal,callback:function(t){e.showEditorModal=t},expression:"showEditorModal"}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{attrs:{label:"名称","label-width":"60px"}},[a("el-input",{attrs:{placeholder:"番剧名称的前缀","auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.editForm.name="string"==typeof t?t.trim():t},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题","label-width":"60px"}},[a("el-input",{attrs:{placeholder:"番剧页面的标题","auto-complete":"off"},model:{value:e.editForm.title,callback:function(t){e.editForm.title="string"==typeof t?t.trim():t},expression:"editForm.title"}})],1)],1)],1),e._v(" "),a("v-modal",{staticClass:"tag-creator-modal",attrs:{"header-text":"创建合集"},on:{submit:e.handleCreateDone},model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[a("el-form",{attrs:{model:e.createForm}},[a("el-form-item",{attrs:{label:"名称","label-width":"60px"}},[a("el-input",{attrs:{placeholder:"番剧名称的前缀","auto-complete":"off"},model:{value:e.createForm.name,callback:function(t){e.createForm.name="string"==typeof t?t.trim():t},expression:"createForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题","label-width":"60px"}},[a("el-input",{attrs:{placeholder:"番剧页面的标题","auto-complete":"off"},model:{value:e.createForm.title,callback:function(t){e.createForm.title="string"==typeof t?t.trim():t},expression:"createForm.title"}})],1)],1)],1),e._v(" "),a("footer",[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.pagination.curPage,"page-sizes":[20,50,100],"page-size":e.pagination.pageSize,pageCount:e.pagination.totalPage,total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[];r._withStripped=!0;var n={render:r,staticRenderFns:i},l=n,s=a(3),c=s(o,l,null,null,null);c.options.__file="frontend/views/bangumi/collection.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),c.options.functional;t.default=c.exports},49:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={video:{720:{useLyc:!1,src:""},1080:{useLyc:!1,src:""}},lyric:{zh:"",en:""}},r={P720:{show:!1,useLyc:!1,src:"bangumi/${name}/video/720/${n}.mp4"},P1080:{show:!1,useLyc:!1,src:"bangumi/${name}/video/1080/${n}.mp4"},lyric:{zh:"bangumi/${name}/lyric/zh/${n}.vtt",en:"bangumi/${name}/lyric/en/${n}.vtt"},bangumiEnglishName:"",bname:"",name:"",part:"",url:"bangumi/${name}/video/${n}.mp4",poster:"bangumi/${name}/poster/${n}.jpg"},i={name:"v-page-bangumi-video",computed:{filter:function(){var e=(this.pagination.curPage-1)*this.pagination.pageSize;return this.list.slice(e,e+this.pagination.pageSize)}},data:function(){return{loading:!0,list:[],bangumis:[],pagination:{totalPage:0,pageSize:24,curPage:1},showEditorModal:!1,showCreateModal:!1,dialogTitle:"",editIndex:0,editForm:{id:"",bangumi_id:"",bname:"",name:"",part:"",poster:"",url:"",resource:o},createForm:r,CDNPrefixp:"https://cdn.riuir.com/"}},created:function(){this.getVideos()},methods:{getVideos:function(){var e=this;this.$http.get("/bangumi/videos").then(function(t){e.list=t.videos,e.bangumis=t.bangumis,e.pagination.totalPage=Math.ceil(e.list.length/e.pagination.pageSize),e.loading=!1})},handleSizeChange:function(e){this.pagination.pageSize=e},handleCurrentChange:function(e){this.pagination.curPage=e},handleEditOpen:function(e,t){var a=this;this.dialogTitle=t.name,this.editIndex=e+(this.pagination.curPage-1)*this.pagination.pageSize,Object.keys(t).forEach(function(e){a.editForm[e]=t[e]}),this.editForm.resource=t.resource?this.$deepAssign(o,t.resource):o,this.showEditorModal=!0},preview:function(e){e&&window.open(""+this.CDNPrefixp+e)},computedBangumiId:function(e){var t=!0,a=!1,o=void 0;try{for(var r,i=this.bangumis[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var n=r.value;if(n.name===e)return n.id}}catch(e){a=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw o}}return 0},handleEditDone:function(){var e=this;this.$http.post("/video/edit",this.editForm).then(function(){Object.keys(e.editForm).forEach(function(t){e.list[e.editIndex][t]=e.editForm[t]}),e.showEditorModal=!1,e.$message.success("操作成功")},function(){e.$message.error("操作失败")})},handleDelete:function(e,t){var a=this,o=null!==t.deleted_at;this.$confirm("确定要"+(o?"恢复":"删除")+"《"+t.name+"》吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/video/delete",{id:t.id,isDeleted:o}).then(function(){a.list[e].deleted_at=o?null:moment().format("YYYY-MM-DD H:m:s"),a.$message.success("操作成功")},function(e){a.$message.error("操作失败")})})},handleCreateCancel:function(){this.createForm=r,this.showCreateModal=!1},handleCreateDone:function(){var e=this,t=this.createForm.part.split("-");if(!this.createForm.bname)return void this.$message.warning("先选择番剧");if(2!==t.length)return void this.$message.warning("集数不符合规范");var a=t[0]-0,o=t[1]-0,r=o-a+1;if(r<=0||a<=0)return void this.$message.warning("集数不符合规范");var i=this.createForm.bangumiEnglishName.toLowerCase();if(""===i)return void this.$message.warning("未填写番剧英文名");var n=this.createForm.name.split("\n");if(n.length!==r)return void this.$message.warning("名称个数不对");for(var l=[],s=0,c=this.computedBangumiId(this.createForm.bname),m=this.createForm.P720.show,u=this.createForm.P1080.show,d=this.createForm.P720.useLyc,p=this.createForm.P1080.useLyc,g=!(m||u),h=d||p,f=a;f<=o;f++){var v=g?"":{video:{720:{useLyc:!1,src:""},1080:{useLyc:!1,src:""}},lyric:{zh:"",en:""}};g||(m&&(v.video[720]={src:this.createForm.P720.src.replace("${n}",f).replace("${name}",i),useLyc:d}),u&&(v.video[1080]={src:this.createForm.P1080.src.replace("${n}",f).replace("${name}",i),useLyc:p})),h&&(v.lyric={zh:this.createForm.lyric.zh.replace("${n}",f).replace("${name}",i)}),l.push({resource:v,bangumi_id:c,part:f,name:n[s++],poster:this.createForm.poster.replace("${n}",f).replace("${name}",i),url:g?this.createForm.url.replace("${n}",f).replace("${name}",i):""})}this.$http.post("/video/create",{arr:l}).then(function(){e.$message.success("操作成功"),e.handleCreateCancel()},function(t){e.$message.error("操作失败")})}}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-button",{attrs:{type:"primary",icon:"plus",size:"large"},on:{click:function(t){e.showCreateModal=!0}}},[e._v("新建视频")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-view",attrs:{data:e.filter,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{"label-position":"left",inline:""}},[a("div",[a("el-form-item",{attrs:{label:"视频 ID"}},[a("span",{domProps:{textContent:e._s(t.row.id)}})]),e._v(" "),a("el-form-item",{attrs:{label:"番剧 ID"}},[a("span",{domProps:{innerHTML:e._s(t.row.bangumi_id)}})])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"海报"}},[a("span",{staticStyle:{cursor:"pointer"},domProps:{textContent:e._s("https://cdn.riuir.com/"+t.row.poster)},on:{click:function(a){e.preview(t.row.poster)}}})])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"播放量"}},[a("span",{domProps:{textContent:e._s(t.row.count_played)}})]),e._v(" "),a("el-form-item",{attrs:{label:"评论数"}},[a("span",{domProps:{textContent:e._s(t.row.count_comment)}})])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"创建时间"}},[a("span",{domProps:{textContent:e._s(t.row.created_at)}})]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",{domProps:{textContent:e._s(t.row.updated_at)}})]),e._v(" "),t.row.deleted_at?a("el-form-item",{attrs:{label:"删除时间"}},[a("span",{domProps:{textContent:e._s(t.row.deleted_at)}})]):e._e()],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",sortable:"",width:"100",label:"索引"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bname",label:"番名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"part",width:"100",label:"集数"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",width:"110",prop:"count_played",label:"播放量"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",width:"110",prop:"count_comment",label:"评论数"}}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"edit"},on:{click:function(a){e.handleEditOpen(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"delete",type:t.row.deleted_at?"warning":"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v(e._s(t.row.deleted_at?"恢复":"删除"))])]}}])})],1),e._v(" "),a("v-modal",{staticClass:"video-editor-modal",attrs:{"header-text":"视频编辑"},on:{submit:e.handleEditDone},model:{value:e.showEditorModal,callback:function(t){e.showEditorModal=t},expression:"showEditorModal"}},[a("el-form",{attrs:{model:e.editForm}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"番剧","label-width":"85px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.bname,callback:function(t){e.editForm.bname=t},expression:"editForm.bname"}},e._l(e.bangumis,function(e){return a("el-option",{key:e.id,attrs:{value:e.name,disabled:!!e.deleted_at}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"集数","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.part,callback:function(t){e.editForm.part="string"==typeof t?t.trim():t},expression:"editForm.part"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"名称","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.editForm.name="string"==typeof t?t.trim():t},expression:"editForm.name"}})],1)],1)],1),e._v(" "),[a("el-form-item",{attrs:{label:"720P 资源","label-width":"85px"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.resource.video[720].src,callback:function(t){e.editForm.resource.video[720].src="string"==typeof t?t.trim():t},expression:"editForm.resource.video[720].src"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),e.editForm.resource.video[720].src?a("el-col",{attrs:{span:4,offset:1}},[e._v("\n            字幕："),a("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.editForm.resource.video[720].useLyc,callback:function(t){e.editForm.resource.video[720].useLyc=t},expression:"editForm.resource.video[720].useLyc"}})],1):e._e()],1)],e._v(" "),[a("el-form-item",{attrs:{label:"1080P 资源","label-width":"85px"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.resource.video[1080].src,callback:function(t){e.editForm.resource.video[1080].src="string"==typeof t?t.trim():t},expression:"editForm.resource.video[1080].src"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),e.editForm.resource.video[1080].src?a("el-col",{attrs:{span:4,offset:1}},[e._v("\n            字幕："),a("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.editForm.resource.video[1080].useLyc,callback:function(t){e.editForm.resource.video[1080].useLyc=t},expression:"editForm.resource.video[1080].useLyc"}})],1):e._e()],1)],e._v(" "),a("el-form-item",{attrs:{label:"外链资源","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.url,callback:function(t){e.editForm.url="string"==typeof t?t.trim():t},expression:"editForm.url"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"海报","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.poster,callback:function(t){e.editForm.poster="string"==typeof t?t.trim():t},expression:"editForm.poster"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"字幕","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.resource.lyric.zh,callback:function(t){e.editForm.resource.lyric.zh="string"==typeof t?t.trim():t},expression:"editForm.resource.lyric.zh"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1)],2)],1),e._v(" "),a("v-modal",{staticClass:"video-create-modal",attrs:{"header-text":"新建视频"},on:{submit:e.handleCreateDone},model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[a("el-form",{attrs:{model:e.createForm}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"番剧","label-width":"85px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createForm.bname,callback:function(t){e.createForm.bname=t},expression:"createForm.bname"}},e._l(e.bangumis,function(e){return a("el-option",{key:e.id,attrs:{value:e.name,disabled:!!e.deleted_at}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"集数","label-width":"85px"}},[a("el-input",{attrs:{placeholder:"m-n","auto-complete":"off"},model:{value:e.createForm.part,callback:function(t){e.createForm.part="string"==typeof t?t.trim():t},expression:"createForm.part"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称","label-width":"85px"}},[a("el-input",{attrs:{placeholder:"${name}","auto-complete":"off"},model:{value:e.createForm.bangumiEnglishName,callback:function(t){e.createForm.bangumiEnglishName="string"==typeof t?t.trim():t},expression:"createForm.bangumiEnglishName"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"画质","label-width":"85px"}},[a("div",[a("el-checkbox",{model:{value:e.createForm.P720.show,callback:function(t){e.createForm.P720.show=t},expression:"createForm.P720.show"}},[e._v("720P")]),e._v(" "),a("el-checkbox",{model:{value:e.createForm.P1080.show,callback:function(t){e.createForm.P1080.show=t},expression:"createForm.P1080.show"}},[e._v("1080P")])],1)]),e._v(" "),e.createForm.P720.show?a("el-row",[a("el-form-item",{attrs:{label:"720P 资源","label-width":"85px"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.P720.src,callback:function(t){e.createForm.P720.src="string"==typeof t?t.trim():t},expression:"createForm.P720.src"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[e._v("\n            字幕："),a("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.createForm.P720.useLyc,callback:function(t){e.createForm.P720.useLyc=t},expression:"createForm.P720.useLyc"}})],1)],1)],1):e._e(),e._v(" "),e.createForm.P1080.show?a("el-row",[a("el-form-item",{attrs:{label:"1080P 资源","label-width":"85px"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.P1080.src,callback:function(t){e.createForm.P1080.src="string"==typeof t?t.trim():t},expression:"createForm.P1080.src"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[e._v("\n            字幕："),a("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.createForm.P1080.useLyc,callback:function(t){e.createForm.P1080.useLyc=t},expression:"createForm.P1080.useLyc"}})],1)],1)],1):e._e(),e._v(" "),e.createForm.P720.show||e.createForm.P1080.show?e._e():a("el-form-item",{attrs:{label:"外链资源","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.url,callback:function(t){e.createForm.url="string"==typeof t?t.trim():t},expression:"createForm.url"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"海报","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.poster,callback:function(t){e.createForm.poster="string"==typeof t?t.trim():t},expression:"createForm.poster"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1),e._v(" "),e.createForm.P720.useLyc||e.createForm.P1080.useLyc?a("el-form-item",{attrs:{label:"字幕","label-width":"85px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createForm.lyric.zh,callback:function(t){e.createForm.lyric.zh="string"==typeof t?t.trim():t},expression:"createForm.lyric.zh"}},[a("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("https://cdn.riuir.com/")])],2)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"名称","label-width":"85px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"一行一个","auto-complete":"off"},model:{value:e.createForm.name,callback:function(t){e.createForm.name="string"==typeof t?t.trim():t},expression:"createForm.name"}})],1)],1)],1),e._v(" "),a("footer",[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.pagination.curPage,"page-sizes":[24,50,100],"page-size":e.pagination.pageSize,pageCount:e.pagination.totalPage,total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[];n._withStripped=!0;var s={render:n,staticRenderFns:l},c=s,m=a(3),u=m(i,c,null,null,null);u.options.__file="frontend/views/bangumi/video.vue",u.esModule&&Object.keys(u.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),u.options.functional;t.default=u.exports},50:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"",email:"",password:""},r={name:"v-admin-user",components:{},props:{},watch:{},computed:{},data:function(){return{showCreateModal:!1,signUp:o}},methods:{register:function(){var e=this;this.$http.post("/auth/register",{name:this.signUp.name,email:this.signUp.email,password:this.signUp.password}).then(function(){e.resetSignUp(),e.$message.success("操作成功")}).catch(function(){e.$message.error("操作失败")})},resetSignUp:function(){this.showCreateModal=!1,this.signUp=o}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("header",[a("el-button",{attrs:{type:"primary",icon:"plus",size:"large"},on:{click:function(t){e.showCreateModal=!0}}},[e._v("注册")]),e._v(" "),a("v-modal",{attrs:{"header-text":"新注册一个管理员"},on:{cancel:e.resetSignUp,submit:e.register},model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{model:{value:e.signUp.name,callback:function(t){e.signUp.name="string"==typeof t?t.trim():t},expression:"signUp.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{type:"email"},model:{value:e.signUp.email,callback:function(t){e.signUp.email="string"==typeof t?t.trim():t},expression:"signUp.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.signUp.password,callback:function(t){e.signUp.password="string"==typeof t?t.trim():t},expression:"signUp.password"}})],1)],1)],1)],1)])},n=[];i._withStripped=!0;var l={render:i,staticRenderFns:n},s=l,c=a(3),m=c(r,s,null,null,null);m.options.__file="frontend/views/admin/user.vue",m.esModule&&Object.keys(m.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)}),m.options.functional;t.default=m.exports}},[35])}});